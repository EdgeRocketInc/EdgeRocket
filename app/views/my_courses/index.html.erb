<!-- Main content area -->
<div class="container-fluid" ng-controller="MyCoursesCtrl">

  <!-- Budget SECTION -->

  <div class="row" ng-if="options_json.budget_management">
    <div class="col-lg-12">
      <div class="panel panel-info">
    		<div class="panel-body">My Budget
		      <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="<%= @budget ? @budget.percent_used : 0 =%>"
              aria-valuemin="0" aria-valuemax="100" style="width: <%= @budget ? @budget.percent_used : 0 =%>%;">0
			      </div>
		      </div>
        </div>
      </div>
    </div>
  </div>


  <div class="row">

  <!-- Courses SECTION -->

    <div class="col-lg-7">
	    <div class="panel panel-info">
  		  <div class="panel-heading">My Courses</div>
        <div class="panel-body">

			    <% if @course_groups.length <= 0 %>
				    <span class="label label-warning">No Courses</span>
          <% else %>
            <accordion close-others="false">
              <accordion-group is-open="cg.section_open" ng-repeat="cg in data.course_groups">
                <accordion-heading>
                  <span class="{{cg.statusClass}}">{{ cg.statusText }}</span>
                  <i class="pull-right glyphicon"
                    ng-class="{'glyphicon-chevron-down': cg.section_open, 'glyphicon-chevron-right': !cg.section_open}">
                  </i>
                </accordion-heading>

                <div class="row course-row" ng-repeat="c in cg.my_courses">
                  <div class="col-md-1">
                    <a href="{{c.product.origin}}" class="" target="_blank">
                      <span class="glyphicon glyphicon-play-circle glyph-big pull-right"
                        tooltip="Go to course">
                      </span>
                    </a>
                  </div>
                  <div class="col-md-4">
                    <a href="/products/{{c.product.id}}" class="course-link" tooltip="Course Details">
                      {{c.product.name}}
                    </a>
                  </div>
                  <div class="col-md-2">
                    <img src="{{c.product.vendor.logo_asset_url}}" class="img-provider-logo" 
                      tooltip="{{c.product.vendor.name}}" />
                  </div>
                  <div class="col-md-1">
                      <span class="glyphicon"
                        ng-class="{'glyphicon-exclamation-sign yellow': c.assigned_by != 'Self', 'glyphicon-user blue': c.assigned_by == 'Self'}"
                        tooltip="Assigned by {{c.assigned_by}}">
                      </span>
                      <span class="glyphicon {{mediaTypes[c.product.media_type].glyph}}"
                        tooltip="{{mediaTypes[c.product.media_type].text}}">
                      </span>
                      <span class="label-duration" ng-if="c.product.duration">{{c.product.duration}}h</span>
                  </div>
                  <div class="col-md-2" ng-if="cg.status != 'compl'">

                    <progressbar class="course-progress" animate="false" max="100"
                      value="c.percent_complete" type="success">
                    </progressbar>

                  </div>
                  <div class="col-md-2" ng-if="cg.status == 'compl'">
                    <span class="green">{{c.completion_date | date:'yyyy-MM-dd'}}</span>
                  </div>

                  <div class="col-md-2">
                    <div class="btn-group">
                      <button type="button" class="btn btn-success btn-xs" tooltip="Move to Completed"
                        ng-click="courseComplete(cg,$index)" ng-if="cg.status != 'compl'">C</button>
                      <button type="button" class="btn btn-primary btn-xs" tooltip="Move to In Progress"
                        ng-click="courseWip(cg,$index)" ng-if="cg.status != 'wip'">I</button>
                      <button type="button" class="btn btn-warning btn-xs" tooltip="Move to Assigned"
                        ng-click="courseRegister(cg,$index)" ng-if="cg.status != 'reg'">A</button>
                      <button type="button" class="btn btn-info btn-xs" tooltip="Move to Wishlist"
                        ng-click="courseWishlist(cg,$index)" ng-if="cg.status != 'wish'">W</button>
                    </div>                  
                  </div>

                </div>

              </accordion-group>
            </accordion>

  			  <% end %>

		    </div>
	    </div>
    </div>

  <!-- Playlists SECTION -->

    <div class="col-lg-5">
	    <div class="panel panel-info">
  		  <div class="panel-heading">My Playlists</div>
  		  <div class="panel-body">
			    <% if @my_playlists.length <= 0 %>
				    <span class="label label-warning">No Playlists</span>
			    <% else %>
            <accordion close-others="false">
              <accordion-group is-open="status.open" ng-repeat="pl in data.my_playlists">
                <accordion-heading>
                  <span class="text-warning">{{pl.title}}</span>
                  <i class="pull-right glyphicon"
                    ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}">
                  </i>
                  <progressbar class="course-progress" max="100"
                    value="pl.percent_complete" type="success" animate="false">
                  </progressbar>
                  <div class="accordion-description">
                    {{pl.description}}
                  </div>
                </accordion-heading>
                <div class="accordion-course text-warning" ng-repeat="pl_item in pl.products">
                    {{pl_item.name}}
                </div>
              </accordion-group>
            </accordion>
			    <% end %>
		    </div>
	    </div>
    </div>
  </div>

  <!-- SECTION -->

</div>
